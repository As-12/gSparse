# gSparse

[![Build Status](https://travis-ci.org/As-12/gSparse.svg?branch=master)](https://travis-ci.org/As-12/gSparse) [![codecov](https://codecov.io/gh/As-12/gSparse/branch/master/graph/badge.svg)](https://codecov.io/gh/As-12/gSparse) [![Documentation](https://codedocs.xyz/As-12/gSparse.svg)](http://gsparsedoc.as12production.com/index.html) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**gSparse:** C++ Library for Graph Sparsification 

![Intro](https://github.com/As-12/gSparse/blob/master/Visualization/SpectralSparsification.gif)

**gSparse** is a C++ library for Graph Sparsification. It is built on top of [Eigen](http://eigen.tuxfamily.org),
an open source linear algebra library.

## Sparsification Algorithm(s) 

**gSparse** currently supports the following algorithm(s). 
- [Spectral Sparsification by Effective Resistance](https://arxiv.org/abs/0803.0929)

## Installation
**gSparse** is implemented as a header-only C++ library, whose only dependency,
**Eigen**, is also header-only. 

When compiling **gSparse**, the compiler must be able to find the **gSparse** and **Eigen** header files. This can be done by specifying compiler's include path to **Eigen** and **gSparse** source directories. 

**gSparse** requires Compiler with C++11 support or above. 

# Parallelization
As **gSparse** utilizes **Eigen3** for its matrix operations, it is possible to enable multi-threading on these operations by simply setting compiler's option. See [Eigen and multi-threading](https://eigen.tuxfamily.org/dox/TopicMultiThreading.html).

## Relation to FastEffectiveResistance
[FastER](http://www.cs.cmu.edu/~jkoutis/SpectralAlgorithms.htm) is a software written in
MATLAB for calculating Graph Effective Resistance.  **gSparse** leverages the algorithm of FastER for Spectral Sparsification in C++. However, **gSparse** is not a direct port of FastER because it provides a different interface and it does not depend on CMG Solver.

## Examples

Below is an example that demonstrates the gSparse to sparsify a graph from CSV files

```cpp
#include <gSparse/gSparse.hpp>
#include <iostream>

int main()
{
    // Create a CSV Reader and specify the file location
    gSparse::GraphReader csvReader = std::make_shared<gSparse::GraphCSVReader>("edgeList.csv", "weightList.csv",",");
    // Create an Undirected Graph. gSparse::Graph object is a shared_ptr.
    gSparse::Graph graph = std::make_shared<gSparse::UndirectedGraph>(csvReader);

    // Display original edge count
    std::cout<<"Original Edge Count: " << graph->GetEdgeCount() << std::endl;

    // Creating Sparsifier Object
    gSparse::SpectralSparsifier::ERSampling sparsifier(graph);
    // Set Hyper-parameters
    // Approximate the Effective Weight Resistance (Faster)
    // C = 4 and Epsilon = 0.5
    sparsifier.SetERPolicy(gSparse::SpectralSparsifier::APPROXIMATE_ER);
    sparsifier.SetC(4.0);
    sparsifier.SetEpsilon(0.5);
    // Compute Effective Weight Resistance
    sparsifier.Compute();
    // Perform Sparsification 
    auto sparseGraph1 = sparsifier.GetSparsifiedGraph();
    std::cout<<"Sparised Edge Count (ApproxER): " << sparseGraph1->GetEdgeCount() << std::endl;
    return EXIT_SUCCESS;
}
```

## Documentation

The [API reference](http://gsparsedoc.as12production.com/index.html) page contains the documentation
of **gSparse** generated by [Doxygen](http://www.doxygen.org/),
including all the background knowledge, example code and class APIs.


## License

**gSparse** is an open source project licensed under MIT License.